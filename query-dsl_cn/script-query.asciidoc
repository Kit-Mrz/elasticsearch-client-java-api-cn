[[java-query-dsl-script-query]]
==== 脚本查询

参见 https://www.elastic.co/guide/en/elasticsearch/reference/5.2/query-dsl-script-query.html[脚本查询]

[source,java]
--------------------------------------------------
QueryBuilder qb = scriptQuery(
    new Script("doc['num1'].value > 1") <1>
);
--------------------------------------------------
<1> 内联脚本


如果你在每个数据节点上都存储了一个名为 `myscript.painless` 的脚本, 脚本内容如下:

[source,painless]
--------------------------------------------------
doc['num1'].value > params.param1
--------------------------------------------------

那么你可以像下面这样使用它:

[source,java]
--------------------------------------------------
QueryBuilder qb = scriptQuery(
    new Script(
        ScriptType.FILE,                       <1>
        "painless",                            <2>
        "myscript",                            <3>
        Collections.singletonMap("param1", 5)) <4>
);
--------------------------------------------------
<1> 脚本类型: `ScriptType.FILE`, `ScriptType.INLINE` 或 `ScriptType.INDEXED`
<2> 脚本引擎
<3> 脚本名称
<4> 参数是 `<String, Object>` 类型的 `Map`
