[[java-admin-indices-put-mapping]]
==== Put Mapping

PUT 映射 API 允许用户在创建索引时添加一个新的类型:

[source,java]
--------------------------------------------------
client.admin().indices().prepareCreate("twitter")   <1>
        .addMapping("tweet", "{\n" +                <2>
                "    \"tweet\": {\n" +
                "      \"properties\": {\n" +
                "        \"message\": {\n" +
                "          \"type\": \"string\"\n" +
                "        }\n" +
                "      }\n" +
                "    }\n" +
                "  }")
        .get();
--------------------------------------------------
<1> <<java-admin-indices-create-index,创建一个索引>>, 名称为 `twitter`
<2> 它同时添加了一个名为 `tweet` 的映射类型.


PUT 映射 API 还允许用户给现有的索引添加一个新的类型:

[source,java]
--------------------------------------------------
client.admin().indices().preparePutMapping("twitter")   <1>
        .setType("user")                                <2>
        .setSource("{\n" +                              <3>
                "  \"properties\": {\n" +
                "    \"name\": {\n" +
                "      \"type\": \"string\"\n" +
                "    }\n" +
                "  }\n" +
                "}")
        .get();

// You can also provide the type in the source document
client.admin().indices().preparePutMapping("twitter")
        .setType("user")
        .setSource("{\n" +
                "    \"user\":{\n" +                        <4>
                "        \"properties\": {\n" +
                "            \"name\": {\n" +
                "                \"type\": \"string\"\n" +
                "            }\n" +
                "        }\n" +
                "    }\n" +
                "}")
        .get();
--------------------------------------------------
<1> 在现有索引上添加一个映射 `twitter`
<2> 添加一个 `user` 映射类型.
<3> `user` 有一个预定义的类型
<4> 类型也可以在source中提供

你可以使用同样的 API 来更新一个现有的映射:

[source,java]
--------------------------------------------------
client.admin().indices().preparePutMapping("twitter")   <1>
        .setType("tweet")                               <2>
        .setSource("{\n" +                              <3>
                "  \"properties\": {\n" +
                "    \"user_name\": {\n" +
                "      \"type\": \"string\"\n" +
                "    }\n" +
                "  }\n" +
                "}")
        .get();
--------------------------------------------------
<1> 在现有索引上添加一个映射 `twitter`
<2> 更新 `user` 映射类型.
<3> `user` 现在有一个新的字段 `user_name`
